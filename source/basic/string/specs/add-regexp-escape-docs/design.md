# 設計ファイル: RegExp.escape メソッドのドキュメント追加

## 追加位置

### ファイルパス
`/source/basic/string/README.md`

### 追加位置1: 正規表現オブジェクトセクション
「正規表現オブジェクト」セクション（540行目付近）の`RegExp`コンストラクタの説明の後に追加

理由：
- `RegExp`関連のメソッドとして自然な位置
- 正規表現の特殊文字のエスケープについて説明した直後なので文脈的に適切

### 追加位置2: replaceメソッドのコード例
「文字列の置換/削除」セクション（1056-1062行目）のコード例に`RegExp.escape`を使った例を追加
- 特に説明を加えず、自然にコード例の一部として含める

## ドキュメント構造

### 正規表現オブジェクトセクションへの追加

#### セクション名
`### [ES2025] RegExp.escape {#regexp-escape}`

#### 内容構成
1. **導入説明**（1段落）
   - メソッドの目的：正規表現の特殊文字を安全にエスケープ
   - ES2025で追加された新機能であることを明記

2. **基本的な使い方**（コード例1つ）
   - シンプルな例で`RegExp.escape`の基本動作を示す
   - 特殊文字のエスケープ例

### replaceメソッドセクションへの追加
既存のコード例に1行追加するだけ：
```js
// RegExp.escapeを使った場合
console.log(str.replace(new RegExp(RegExp.escape("?"), "g"), "!")); // => "!!!"
```

## コード例の設計

### 正規表現オブジェクトセクションでの基本例

↓みたいに変更するイメージ

## 正規表現オブジェクト {#regexp-object}

<!-- パターンと正規表現オブジェクトの用語については https://github.com/asciidwango/js-primer/issues/21#issuecomment-293502813 -->

文字列による検索では、固定の文字列にマッチするものしか検索できません。
一方で正規表現による検索では、あるパターン（規則性）にマッチするという柔軟な検索ができます。

正規表現は正規表現オブジェクト（`RegExp`オブジェクト）として表現されます。
正規表現オブジェクトはマッチする範囲を決める`パターン`と正規表現の検索モードを指定する`フラグ`の2つで構成されます。

正規表現オブジェクトを作成するには、正規表現リテラルと`RegExp`コンストラクタを使う2つの方法があります。正規表現リテラルは、`/`と`/`のリテラル内に正規表現のパターンを書くことで、正規表現オブジェクトを作成でき、`RegExp`コンストラクタは文字列から正規表現オブジェクトを作成できます。

<!-- textlint-disable eslint -->
<!-- doctest:disable -->
```js
// 正規表現リテラルで正規表現オブジェクトを作成
const patternA = /パターン/フラグ;
// `RegExp`コンストラクタで正規表現オブジェクトを作成
const patternB = new RegExp("パターン文字列", "フラグ");
```
<!-- textlint-enable eslint -->


正規表現のパターン内では、次の文字は**特殊文字**と呼ばれ、特別な意味を持ちます。

```
\ ^ $ . * + ? ( ) [ ] { } |
```

たとえば、`+`は1回以上の繰り返しを意味する特殊文字です。

次のコードでは、`+`という1回以上の繰り返しを意味する特殊文字を使い、`a`が1回以上連続する文字列にマッチする正規表現オブジェクトを作成しています。

```js
const pattern = /a+/;
```

正規表現オブジェクトを作成するもうひとつの方法として`RegExp`コンストラクタがあります。
`RegExp`コンストラクタでは、文字列から正規表現オブジェクトを作成できます。

次のコードでは、`RegExp`コンストラクタを使って`a`が1文字以上連続している文字列にマッチする正規表現オブジェクトを作成しています。
これは先ほどの正規表現リテラルで作成した正規表現オブジェクトと同じ意味になります。

```js
const pattern = new RegExp("a+");
```

正規表現では、特殊文字をそのまま文字として扱いたい場合は、バックスラッシュ（`\`）でエスケープする必要があります。

たとえば、`+`という特殊文字をそのまま文字として扱いたい場合は、`\+`のようにバックスラッシュでエスケープします。

ES2025では、`RegExp.escape`メソッドが追加され、正規表現の特殊文字を簡単にエスケープできるようになりました。このメソッドを使うことで、手動でエスケープする手間が省けます。

```js
const escaped = RegExp.escape("a+b?c");
console.log(escaped); // => "a\+b\?c"
```

### replaceセクションでの追加例（既存コードに混ぜる）
```js
const str = "???";
// ... 既存のコード例 ...
// replaceAllメソッドに文字列を指定した場合は、一致したものがすべて置換される
console.log(str.replaceAll("?", "!")); // => "!!!"
// replaceメソッドの場合は、正規表現の特殊文字はエスケープが必要となる
console.log(str.replace(/\?/g, "!")); // => "!!!"
// RegExp.escapeを使った場合（ES2025）
console.log(str.replace(new RegExp(RegExp.escape("?"), "g"), "!")); // => "!!!"
// replaceAllメソッドにも正規表現を渡せるが、この場合はエスケープが必要となるためreplaceと同じ
console.log(str.replaceAll(/\?/g, "!")); // => "!!!"
```

## 文体と形式

### 既存の文体に合わせる要素
- `{{book.console}}`タグの使用
- コード例の前後に説明文を配置
- コメントは`// =>`形式で結果を示す
- ES仕様年の明記（[ES2025]タグ）
- アンカーリンク用のID（`{#regexp-escape}`）

### トーンの統一
- 「〜できます」調の丁寧な説明
- 技術的詳細は最小限に
- 初心者にも理解しやすい言葉選び

## 他セクションとの関連

### 参照すべき既存セクション
- 正規表現オブジェクト（line 540-）
- 正規表現リテラルとRegExpコンストラクタの違い（line 584-）
- 文字列の置換/削除（line 989-）

### 相互参照の追加
- 正規表現の特殊文字の説明箇所から`RegExp.escape`への言及を検討（オプション）

## 制約事項の遵守

### 軽い説明に留める
- メソッドの内部実装には触れない
- エスケープされる全特殊文字のリストは載せない
- 基本的な使い方と利点の説明に焦点

### 初心者向けの配慮
- 正規表現の知識が浅くても理解できる説明
- 実用的なユースケースを提示
- 過度に技術的な用語を避ける
